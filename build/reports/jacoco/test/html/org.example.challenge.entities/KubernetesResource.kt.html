<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>KubernetesResource.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">kotlin-senior-challenge</a> &gt; <a href="index.source.html" class="el_package">org.example.challenge.entities</a> &gt; <span class="el_source">KubernetesResource.kt</span></div><h1>KubernetesResource.kt</h1><pre class="source lang-java linenums">package org.example.challenge.entities

import com.fasterxml.jackson.annotation.JsonInclude
import io.fabric8.kubernetes.api.model.HasMetadata
import javax.persistence.ElementCollection
import javax.persistence.Entity
import javax.persistence.Id

/* Since all the message from the topic are from K8S I created an entity that's tightly related to the Kubernetes object
   for a better abstraction there are 2 options, creating different tables and storing the data based on the origin of
   the resource or creating an Object to replace the HasMetadata interface that store the desired values from
   the resource as not all the fields might of importance
*/
<span class="fc" id="L14">@Entity(name = &quot;KubernetesResource&quot;)</span>
<span class="fc" id="L15">class KubernetesResource(</span>
<span class="fc" id="L16">    @Id</span>
<span class="fc" id="L17">    val id: String,</span>
<span class="fc" id="L18">    val name: String,</span>
<span class="fc" id="L19">    val resource: HasMetadata,</span>
<span class="fc" id="L20">    @ElementCollection</span>
    @JsonInclude(JsonInclude.Include.NON_EMPTY)
<span class="pc" id="L22">    var childrenIds: MutableSet&lt;String&gt;</span>
) {
<span class="fc" id="L24">    constructor(kubernetesObject: HasMetadata) : this(</span>
<span class="fc" id="L25">        kubernetesObject.metadata.uid,</span>
<span class="fc" id="L26">        kubernetesObject.metadata.name,</span>
<span class="fc" id="L27">        kubernetesObject,</span>
<span class="fc" id="L28">        mutableSetOf()</span>
<span class="fc" id="L29">    )</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.9.202303310957</span></div></body></html>